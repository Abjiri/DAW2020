extends layout

block content

  if subpage=='students'
    .w3-card-4
      header.w3-container.w3-teal
        h3.w3-left Students List (DAW2020)
      if list.length > 0
        .w3-container 
          table.w3-table-all
            tr 
              th Number
              th Name
              th Git
              th 
            each s in list
              tr
                td 
                  a(href=`/students/${s.number}`) #{s.number}
                td= s.name
                td= s.git
                td
                  form(method="POST" action=`/students/${s.number}?_method=DELETE`)
                    button(class="w3-btn w3-blue-grey" type="submit" value="Remover")
      else
        .w3-container
          p There are no students...
      footer.w3-container.w3-teal
        address Generated by tp7App  :: 2020-Nov, Hugo Cardoso (A85006)

  if subpage=='student'
    .w3-card-4
      header.w3-container.w3-teal
        h3.w3-left Student #{student.number} (DAW2020)
      ul(style='list-style-type:none')
        li 
          b name: 
          | #{student.name}
        li 
          b Git: 
          | #{student.git}
        li
          b TPC: 
          | #{student.tpc}
      
      footer.w3-container.w3-teal
        address Gerado por dawApp :: 2020-Nov, jcr

  if subpage=='register'
    .w3-card-4
      header.w3-container.w3-teal
        h3.w3-left New student
        
      form(class="w3-container" action="/students" method="POST" style="margin-bottom: 30px; margin-top: 10px")
        label(class="w3-text-teal")
          b Number:
        input(
          class="w3-input w3-border w3-light-grey" 
          style="margin-bottom: 10px" 
          type="text" 
          name="number" 
          placeholder="Axxxxx ou PGxxxxx" 
          pattern="(A|PG)[1-9][0-9]{4}"
          required
        )

        label(class="w3-text-teal") 
          b Name:
        input(class="w3-input w3-border w3-light-grey" type="text" name="name" style="margin-bottom: 10px" required)

        label(class="w3-text-teal") 
          b Git:
        input(class="w3-input w3-border w3-light-grey" type="url" name="git" style="margin-bottom: 10px" required)

        label(class="w3-text-teal") 
          b TPC:
        div.form-group
          each val in ['1','2','3','4','5','6','7','8']
            div.checkbox-inline
              label(for=`tpc${val}`)=val
                input.checkbox-input(type='checkbox', name=`tpc${val}`, value=checked, id=`tpc${val}`, style="margin-left: 10px")

        div(id="buttons" style="margin-top: 20px; margin-bottom: 20px")
          input(class="w3-btn w3-blue-grey" style="margin-right: 20px" type="submit" value="Registar")
          input(class="w3-btn w3-blue-grey" type="reset" value="Limpar valores")
  
  if subpage=='edit'
    .w3-card-4
      header.w3-container.w3-teal
        h3.w3-left Edit student
        
      form(class="w3-container" method="POST" action=`/students/${student.number}?_method=PUT` style="margin-bottom: 30px; margin-top: 10px")
        input(name="id" value=student.number hidden)

        label(class="w3-text-teal")
          b Number:
        input(
          class="w3-input w3-border w3-light-grey" 
          style="margin-bottom: 10px"
          type="text" 
          name="number" 
          value= student.number
          placeholder="Axxxxx ou PGxxxxx" 
          pattern="(A|PG)[1-9][0-9]{4}"
          required
        )

        label(class="w3-text-teal") 
          b Name:
        input(
          class="w3-input w3-border w3-light-grey" 
          style="margin-bottom: 10px"
          type="text" 
          name="name"
          value= student.name
          required
        )

        label(class="w3-text-teal") 
          b Git:
        input(
          class="w3-input w3-border w3-light-grey" 
          style="margin-bottom: 10px" 
          type="url" 
          name="git" 
          value= student.git
          required
        )

        label(class="w3-text-teal") 
          b TPC:
        div.form-group
          each val in ['1','2','3','4','5','6','7','8']
            div.checkbox-inline
              label(for=`tpc${val}`)=val
                input.checkbox-input(
                  type='checkbox'
                  name=`tpc${val}`
                  value=checked
                  checked= student.tpc[parseInt(val)-1] == 1
                  id=`tpc${val}`
                  style="margin-left: 10px"
                )

        div(id="buttons" style="margin-top: 20px; margin-bottom: 20px")
          input(class="w3-btn w3-blue-grey" style="margin-right: 20px" type="submit" value="Editar")
          input(class="w3-btn w3-blue-grey" type="reset" value="Limpar valores")

  if subpage=='error'
    h1= message
    h2= error.status
    pre #{error.stack}